function SortedArray(){var t=0;this.array=[];for(var n=arguments.length;t<n;)this.insert(arguments[t++]);this.length=0;this.insert=function(e){var g=this.array,p=g.length;g.push(e);for(this.length=this.array.length;p;){e=p;var k=--p;if(g[e]<g[k]){var h=g[e];g[e]=g[k];g[k]=h}}return this};this.get=function(e){return this.array[e]};this.getArray=function(){return this.array};this.uniqueInsert=function(e){-1==this.search(e)&&this.insert(e)};this.search=function(e){for(var g=0,p=this.array,k=p.length;k>
g;){var h=(k+g)/2>>>0,n=p[h];if(n<e)g=h+1;else if(n>e)k=h;else return h}return-1};this.remove=function(e){e=this.search(e);0<=e&&this.array.splice(e,1);this.length=this.array.length;return this}}"undefined"===typeof exports&&(exports={});
var Selector=exports.Selector=function(t,n){function e(a,b,c,d,k){var h=document.createElement("ul");h.className=n["ul-class"];1<c&&(h.style.display="none");for(var t=a.length,s=null,v=0;v<t;v++){var q=a[v],l=q.children&&q.children.length?q.children.length:0,m=document.createElement("li");h.appendChild(m);m.isSelected=!1;m.code=q.code;m.liParent=b;m.data=q;var f=document.createElement("a");f.href="javascript: void(0)";f.value=q.name;f.previousSiblingLink=d;f.nextSiblingLink=null;f.parentLink=k;d&&
(d.nextSiblingLink=f);0==v&&(s=f);f.className="circleAndText";m.appendChild(f);f.liParent=m;f.onclick=function(a){var b=this.liParent;p(b,n.callback,!b.isSelected);a.stopPropagation()};var u=document.createElement("div");u.className=0<l?"plusOrMinus":"hidden-plusOrMinus";u.innerHTML="+";f.appendChild(u);0<l&&(u.onclick=function(a){g(this);a.stopPropagation()});f.plusOrMinus=u;f.onkeydown=function(a){if(13==a.keyCode){var b=this.liParent;p(b,n.callback,!b.isSelected);a.stopPropagation();return!1}if(38==
a.keyCode)return this.previousSiblingLink&&this.previousSiblingLink.focus(),a.stopPropagation(),!1;if(40==a.keyCode)return this.plusOrMinus.opened&&this.firstChildLink?this.firstChildLink.focus():this.nextSiblingLink?this.nextSiblingLink.focus():this.parentLink.nextSiblingLink&&this.parentLink.nextSiblingLink.focus(),a.stopPropagation(),!1;if(37==a.keyCode||39==a.keyCode)return a.stopPropagation(),g(this.plusOrMinus),a.keyCode=9,a.keyCode};d=document.createElement("div");d.className="circle";f.appendChild(d);
d=document.createElement("div");d.className="title";f.appendChild(d);var r=document.createTextNode(q.name);d.appendChild(r);d=f;0<l&&(l=document.createElement("div"),l.className="empty-counter",f.appendChild(l),r=document.createTextNode("0"),l.appendChild(r),m.counter={div:l,value:0},l=e(q.children,m,c+1,d,f),m.appendChild(l.ul),f.firstChildLink=l.firstChildLink,u.childrenUl=l.ul);m.childNumber=q.children?q.children.length:0}return{ul:h,firstChildLink:s}}function g(a){"+"==a.innerHTML?(a.innerHTML=
"&#8212;",a.childrenUl&&(a.childrenUl.style.display="block"),a.opened=!0):(a.innerHTML="+",a.childrenUl&&(a.childrenUl.style.display="none"),a.opened=!1)}function p(a,b,c){k(a,c);if(a.liParent){var d=a.liParent.counter.value,d=c?d+1:d-1;h(a.liParent,d);c?d==a.liParent.childNumber&&(a.liParent.className="selected",a.liParent.isSelected=!0,r(a.liParent.code,!0)):(a.liParent.className="not-selected",a.liParent.isSelected=!1,r(a.liParent.code,!1))}0<a.childNumber&&h(a,c?a.childNumber:0);b&&b.call(a,a.data,
w)}function k(a,b){"li"==a.tagName.toLowerCase()&&(a.isSelected=b,a.className=b?"selected":"not-selected",r(a.code,b),a.firstChild.title=a.firstChild.value+(b?" is selected":""));for(var c=a&&a.children&&a.children.length?a.children.length:0,d=0;d<c;d++)k(a.children[d],b)}function h(a,b){var c=a.counter;c.value=b;c.div.innerHTML=c.value;c.div.className=0<c.value?"counter":"empty-counter";b=a.firstChild.value;a.firstChild.title=b+": "+c.value+(1!=c.value?" selected countries":" selected country")}
function r(a,b){a&&(b?w.uniqueInsert(a):w.remove(a))}function x(a,b){if(b instanceof Array)return b;if("object"===typeof b){for(var c in b)a[c]=x(a[c],b[c]);return a}return b}var y={"ul-class":"default-selector",callback:null},w=new SortedArray,s=null;(function(){var a=n;if(a){"string"===typeof a&&(a={container:a});var b=JSON.parse(JSON.stringify(y)),c;for(c in a)b[c]=x(b[c],a[c]);a=b}else a=JSON.parse(JSON.stringify(y));n=a;s=e(t,null,1,null,null).ul})();this.render=function(){return s};this.clear=
function(){for(var a=s.children.length,b=0;b<a;b++)p(s.children[b],null,!1)}};
